let serverData = {
    "catalog": {
        "rolex": {
            "Explorer 2":{
                "desc": "Чистое золото, изумрудный циферблат",
                "price": "45 000 €",
                "imageUrl": "images/RolexExplorer2.png"
            },
            "Rolex Silver Dream":{
                "desc": "Чистое серебро, черно жемчужный циферблат",
                "price": "25 000 €",
                "imageUrl": "images/RolexSilverDream.png"
            },
            "Rolex Pink Gold":{
                "desc": "Розовое золото, изумрудный циферблат",
                "price": "35 000 €",
                "imageUrl": "images/RolexPinkGold.png"
            },
            "Rolex Night Express":{
                "desc": "Розовое серебро, белый циферблат",
                "price": "10 000 €",
                "imageUrl": "images/RolexNightExpress.png"
            },
            "Rolex Full Gold":{
                "desc": "Чистое золото, бело кварцевый циферблат",
                "price": "75 000 €",
                "imageUrl": "images/RolexFullGold.png"
            },
            "Rolex Diamond Gold":{
                "desc": "Золото высшей пробы, с гранеными алмазами",
                "price": "170 000 €",
                "imageUrl": "images/RolexDiamondGold.png"
            },
            "Sky Dweller":{
                "desc": "Чистое золото, черно жемчужный циферблат",
                "price": "35 000 €",
                "imageUrl": "images/RolexSkyDweller.png"
            },
            "Oyster Perpetual":{
                "desc": "Белое серебро, с розовым циферблатом",
                "price": "24 000 €",
                "imageUrl": "images/RolexOysterPerpetual.png"
            },
            "Pearlmaster":{
                "desc": "Белый жемчуг, алмазный циферблат",
                "price": "155 000 €",
                "imageUrl": "images/RolexPearlmaster.png"
            },
            "Data-Date":{
                "desc": "Белое золото, с синим циферблатом",
                "price": "57 000 €",
                "imageUrl": "images/RolexDataDate.png"
            }

        },
        "cartier": {
            "Ballon Bleu De Cartier":{
                "desc": "Автоматический подзавод, розовое золото, кожа",
                "price": "5 000 €",
                "imageUrl": "images/cartier1.png"
            },
            "Ballon Bleu De Cartier 2":{
                "desc": "Ручной подзавод, розовое золото, бриллианты",
                "price": "4 000 €",
                "imageUrl": "images/cartier2.png"
            },
            "Ballon Bleu De Cartier 3":{
                "desc": "Автоматический подзавод, розовое золото",
                "price": "3 000 €",
                "imageUrl": "images/cartier3.png"
            },
            "Ballon Bleu De Cartier 4":{
                "desc": "Автоматический подзавод, розовое золото, кожа",
                "price": "5 000 €",
                "imageUrl": "images/cartier1.png"
            },
            "Ballon Bleu De Cartier 5":{
                "desc": "Ручной подзавод, розовое золото, бриллианты",
                "price": "4 000 €",
                "imageUrl": "images/cartier2.png"
            },
            "Ballon Bleu De Cartier 6":{
                "desc": "Автоматический подзавод, розовое золото",
                "price": "3 000 €",
                "imageUrl": "images/cartier3.png"
            },
            "Ballon Bleu De Cartier 7":{
                "desc": "Автоматический подзавод, розовое золото, кожа",
                "price": "5 000 €",
                "imageUrl": "images/cartier1.png"
            },
            "Ballon Bleu De Cartier 8":{
                "desc": "Ручной подзавод, розовое золото, бриллианты",
                "price": "4 000 €",
                "imageUrl": "images/cartier2.png"
            },
            "Ballon Bleu De Cartier 9":{
                "desc": "Автоматический подзавод, розовое золото",
                "price": "3 000 €",
                "imageUrl": "images/cartier3.png"
            },
            "Ballon Bleu De Cartier 10":{
                "desc": "Автоматический подзавод, розовое золото, кожа",
                "price": "5 000 €",
                "imageUrl": "images/cartier1.png"
            }
        },
        "tissot": {
            "Tissot Chrono XL Classic":{
                "desc": "Один из самых больших хронографов",
                "price": "15 000 €",
                "imageUrl": "images/tissot1.png"
            },
            "Tissot SuperSport Chrono":{
                "desc": "Спортивная классика на каждый день",
                "price": "12 000 €",
                "imageUrl": "images/tissot2.png"
            },
            "Tissot Pr 100 Sport Gent":{
                "desc": "Кварцевый хронограф, диаметр 44мм",
                "price": "9 000 €",
                "imageUrl": "images/tissot3.png"
            },
            "Tissot Chrono XL Classic 2":{
                "desc": "Один из самых больших хронографов",
                "price": "15 000 €",
                "imageUrl": "images/tissot1.png"
            },
            "Tissot SuperSport Chrono 2":{
                "desc": "Спортивная классика на каждый день",
                "price": "12 000 €",
                "imageUrl": "images/tissot2.png"
            },
            "Tissot Pr 100 Sport Gent 2":{
                "desc": "Кварцевый хронограф, диаметр 44мм",
                "price": "9 000 €",
                "imageUrl": "images/tissot3.png"
            },
            "Tissot Chrono XL Classic 3":{
                "desc": "Один из самых больших хронографов",
                "price": "15 000 €",
                "imageUrl": "images/tissot1.png"
            },
            "Tissot SuperSport Chrono 3":{
                "desc": "Спортивная классика на каждый день",
                "price": "12 000 €",
                "imageUrl": "images/tissot2.png"
            },
            "Tissot Pr 100 Sport Gent 3":{
                "desc": "Кварцевый хронограф, диаметр 44мм",
                "price": "9 000 €",
                "imageUrl": "images/tissot3.png"
            },
            "Tissot Chrono XL Classic 4":{
                "desc": "Один из самых больших хронографов",
                "price": "15 000 €",
                "imageUrl": "images/tissot1.png"
            }
        },        
        "omega": {
            "Moonwatch Professional Co-Axial":{
                "desc": "Браслет с матовой поверхностью",
                "price": "15 000 €",
                "imageUrl": "images/omega1.png"
            },
            "TourBillon Co-Axial Master":{
                "desc": "Корпус из 18-каратного золота Sedna",
                "price": "41 000 €",
                "imageUrl": "images/omega2.png"
            },
            "Tresor Quartz 36 mm":{
                "desc": "Корпус 36 мм из нержавеющей стали",
                "price": "38 000 €",
                "imageUrl": "images/omega3.png"
            },
            "Moonwatch Professional Co-Axial 2":{
                "desc": "Браслет с матовой поверхностью",
                "price": "15 000 €",
                "imageUrl": "images/omega1.png"
            },
            "TourBillon Co-Axial Master 2":{
                "desc": "Корпус из 18-каратного золота Sedna",
                "price": "41 000 €",
                "imageUrl": "images/omega2.png"
            },
            "Tresor Quartz 36 mm 2":{
                "desc": "Корпус 36 мм из нержавеющей стали",
                "price": "38 000 €",
                "imageUrl": "images/omega3.png"
            },
            "Moonwatch Professional Co-Axial 3":{
                "desc": "Браслет с матовой поверхностью",
                "price": "15 000 €",
                "imageUrl": "images/omega1.png"
            },
            "TourBillon Co-Axial Master 3":{
                "desc": "Корпус из 18-каратного золота Sedna",
                "price": "41 000 €",
                "imageUrl": "images/omega2.png"
            },
            "Tresor Quartz 36 mm 3":{
                "desc": "Корпус 36 мм из нержавеющей стали",
                "price": "38 000 €",
                "imageUrl": "images/omega3.png"
            },
            "Moonwatch Professional Co-Axial 4":{
                "desc": "Браслет с матовой поверхностью",
                "price": "15 000 €",
                "imageUrl": "images/omega1.png"
            }
        },
        "breguet": {
            "Classique Grande Complication":{
                "desc": "Минутный репетир из 18-каратного золота",
                "price": "35 000 €",
                "imageUrl": "images/breguet1.png"
            },
            "Marine Grande Complication":{
                "desc": "Турбийон из 18-каратного розового золота",
                "price": "49 000 €",
                "imageUrl": "images/breguet2.png"
            },
            "Classique":{
                "desc": "18-каратное белое золото с тонким рифлением",
                "price": "32 000 €",
                "imageUrl": "images/breguet3.png"
            },
            "Classique Grande Complication 2":{
                "desc": "Минутный репетир из 18-каратного золота",
                "price": "35 000 €",
                "imageUrl": "images/breguet1.png"
            },
            "Marine Grande Complication 2":{
                "desc": "Турбийон из 18-каратного розового золота",
                "price": "49 000 €",
                "imageUrl": "images/breguet2.png"
            },
            "Classique 2":{
                "desc": "18-каратное белое золото с тонким рифлением",
                "price": "32 000 €",
                "imageUrl": "images/breguet3.png"
            },
            "Classique Grande Complication 3":{
                "desc": "Минутный репетир из 18-каратного золота",
                "price": "35 000 €",
                "imageUrl": "images/breguet1.png"
            },
            "Marine Grande Complication 3":{
                "desc": "Турбийон из 18-каратного розового золота",
                "price": "49 000 €",
                "imageUrl": "images/breguet2.png"
            },
            "Classique 3":{
                "desc": "18-каратное белое золото с тонким рифлением",
                "price": "32 000 €",
                "imageUrl": "images/breguet3.png"
            },
            "Classique Grande Complication 4":{
                "desc": "Минутный репетир из 18-каратного золота",
                "price": "35 000 €",
                "imageUrl": "images/breguet1.png"
            }

        }
    }
};

let currentCatalog = 'rolex';

if(!localStorage.getItem('bag')) localStorage.setItem('bag', JSON.stringify([]));

document.querySelector('.cartierCategoryButton').addEventListener('click',function(){
    showDataOnPage('cartier',document.querySelector('.cartierCategoryButton'));
});
document.querySelector('.tissotCategoryButton').addEventListener('click',function(){
    showDataOnPage('tissot',document.querySelector('.tissotCategoryButton'));
});
document.querySelector('.rolexCategoryButton').addEventListener('click',function(){
    showDataOnPage('rolex',document.querySelector('.rolexCategoryButton'));
});
document.querySelector('.omegaCategoryButton').addEventListener('click',function(){
    showDataOnPage('omega',document.querySelector('.omegaCategoryButton'));
});
document.querySelector('.breguetCategoryButton').addEventListener('click',function(){
    showDataOnPage('breguet',document.querySelector('.breguetCategoryButton'));
});

setClickEvents();

function setClickEvents(){
    document.querySelectorAll('.getFullItemDescription').forEach(elem => {
        elem.addEventListener('click', function(){
            localStorage.setItem('imageUrl',JSON.stringify(serverData.catalog[currentCatalog][elem.childNodes[1].childNodes[3].textContent].imageUrl));
            localStorage.setItem('name',JSON.stringify(elem.childNodes[1].childNodes[3].textContent));
            localStorage.setItem('price',JSON.stringify(elem.childNodes[1].childNodes[7].textContent));
            location.href = 'fullItemDescription.html';
        });
    });
}
function showDataOnPage(watchesModel, buttonToTurnOn){
    buildCards(serverData, buttonToTurnOn, watchesModel);
}
    
function buildCards(data, buttonToTurnOn, watchesModel){
    currentCatalog = watchesModel.toLowerCase();
    document.querySelectorAll('.categoryButton').forEach(button => {
        button.classList.remove('on');
    });
    buttonToTurnOn.classList.add('on');

    let content = document.querySelector('.content');   
    content.innerHTML = '';

    console.log([data.catalog[watchesModel]]);

    [data.catalog[watchesModel]].forEach(watches => {
        let keys = Object.keys(watches);
        keys.forEach(key => {

            content.innerHTML += 
                `<div class="card getFullItemDescription">
                    <div class="frontCard">
                        <img src="${watches[key].imageUrl}">
                        <h3>${key}</h3>
                        <p>${watches[key].desc}</p>
                        <span>${watches[key].price}</span>
                    </div>
                    <div class="backCard">
                        <p>Часы появились в результате тесного сотрудничества Rolex с миром исследований.Они порой находятся в условиях, в которых отваживается работать далеко не каждый. В течение многих лет часовая марка тестировала эти часы на прочность в реальных условиях, снаряжая полярные, горные и спелеологические экспедиции.</p>
                        <a href="#">Подробнее...</a>
                    </div>
                </div>`;
        })
    });
    
    setClickEvents();
}
